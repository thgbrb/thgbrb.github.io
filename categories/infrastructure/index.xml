<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Infrastructure on Œª JogaNaContaDaInfra</title>
        <link>https://joganacontadainfra.com.br/categories/infrastructure/</link>
        <description>Recent content in Infrastructure on Œª JogaNaContaDaInfra</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>pt-br</language>
        <lastBuildDate>Wed, 19 Apr 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://joganacontadainfra.com.br/categories/infrastructure/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Utilizando MessageTemplate em log estruturado.</title>
        <link>https://joganacontadainfra.com.br/p/serilog-message-template/</link>
        <pubDate>Wed, 19 Apr 2023 00:00:00 +0000</pubDate>
        
        <guid>https://joganacontadainfra.com.br/p/serilog-message-template/</guid>
        <description>&lt;img src="https://joganacontadainfra.com.br/p/serilog-message-template/jatin-jangid-1f0DB1u7p8Q-unsplash.jpg" alt="Featured image of post Utilizando MessageTemplate em log estruturado." /&gt;&lt;h2 id=&#34;defini√ß√£o-de-log-estruturado&#34;&gt;Defini√ß√£o de log estruturado
&lt;/h2&gt;&lt;p&gt;Log estruturado √© uma t√©cnica de registro de eventos em sistemas de computador, que envolve o armazenamento de informa√ß√µes em um formato padronizado e organizado, facilitando a an√°lise e busca de informa√ß√µes espec√≠ficas. Em contraste com o log n√£o estruturado, onde as informa√ß√µes s√£o gravadas em texto simples e sem formata√ß√£o, o log estruturado segue uma estrutura definida, geralmente em formato de chave-valor. Essa estrutura permite que os dados sejam organizados de maneira coerente e significativa, tornando mais f√°cil a an√°lise de problemas e a identifica√ß√£o de padr√µes. Al√©m disso, o log estruturado pode ser armazenado em v√°rios tipos de banco de dados, permitindo um acesso mais r√°pido e eficiente √†s informa√ß√µes de registro. Em resumo, o log estruturado √© uma t√©cnica importante para melhorar a visibilidade e a confiabilidade de sistemas de computador, tornando mais f√°cil a identifica√ß√£o e resolu√ß√£o de problemas.&lt;/p&gt;
&lt;h3 id=&#34;exemplo-de-logs&#34;&gt;Exemplo de logs
&lt;/h3&gt;&lt;p&gt;&lt;em&gt;Exemplo de log n√£o estruturado&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2023-04-18 14:32:45,943 [INFO] Aplicativo iniciado
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2023-04-18 14:32:46,156 [DEBUG] Conex√£o com banco de dados estabelecida com sucesso
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2023-04-18 14:33:02,234 [ERROR] Erro ao processar solicita√ß√£o de login do usu√°rio &amp;#34;steve_jobs&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2023-04-18 14:34:17,345 [WARN] Quantidade de mem√≥ria dispon√≠vel abaixo do limite m√≠nimo
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;2023-04-18 14:35:09,876 [INFO] Aplicativo encerrado
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Nesse exemplo, as informa√ß√µes s√£o gravadas em texto simples e sem formata√ß√£o definida. As linhas do log cont√™m um carimbo de data/hora, um n√≠vel de log (INFO, DEBUG, ERROR, WARN), e uma mensagem descritiva sobre o evento que ocorreu. No entanto, n√£o h√° estrutura definida para as informa√ß√µes, tornando dif√≠cil a an√°lise e busca de informa√ß√µes espec√≠ficas, especialmente em grandes conjuntos de dados de log.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Exemplo de log estruturado&lt;/em&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-04-18T14:32:45.943Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;level&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;INFO&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Aplicativo iniciado&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-04-18T14:32:46.156Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;level&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;DEBUG&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Conex√£o com banco de dados estabelecida com sucesso&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-04-18T14:33:02.234Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;level&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ERROR&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Erro ao processar solicita√ß√£o de login&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;username&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;steve_jobs&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-04-18T14:34:17.345Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;level&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;WARN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Quantidade de mem√≥ria dispon√≠vel abaixo do limite m√≠nimo&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;timestamp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2023-04-18T14:35:09.876Z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;level&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;INFO&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Aplicativo encerrado&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Observe que agora h√° um campo adicional chamado &amp;ldquo;username&amp;rdquo; que foi adicionado ao evento de log que gerou o erro. O valor &amp;ldquo;joao&amp;rdquo; que antes estava na mensagem agora foi transformado em uma propriedade, tornando a informa√ß√£o mais facilmente acess√≠vel e busc√°vel. Essa √© uma das principais vantagens do log estruturado: a capacidade de separar as informa√ß√µes em campos espec√≠ficos para que possam ser facilmente pesquisadas e analisadas.&lt;/p&gt;
&lt;h2 id=&#34;o-que-√©-o-messagetemplate-no-serilog&#34;&gt;O que √© o MessageTemplate no Serilog
&lt;/h2&gt;&lt;p&gt;O MessageTemplate no Serilog √© um recurso que permite que as mensagens de log sejam formatadas de maneira mais sofisticada e flex√≠vel. Ele √© um modelo de mensagem que define uma string de formato contendo marcadores de posi√ß√£o que podem ser substitu√≠dos por valores din√¢micos durante a grava√ß√£o do log. Em vez de simplesmente gravar uma mensagem de log em uma string fixa, o MessageTemplate permite que as mensagens de log sejam formatadas de maneira personalizada, com base em informa√ß√µes espec√≠ficas do evento de log.
O uso de MessageTemplates tamb√©m pode melhorar o desempenho, reduzindo a sobrecarga de aloca√ß√£o de mem√≥ria e a convers√£o de tipos, uma vez que os valores de substitui√ß√£o s√£o processados de forma mais eficiente do que se fossem concatenados em uma √∫nica string fixa. Em resumo, o MessageTemplate √© uma ferramenta √∫til para tornar a grava√ß√£o de logs mais flex√≠vel, leg√≠vel e eficiente.&lt;/p&gt;
&lt;p&gt;Para utilizar o MessageTemplate do Serilog, √© necess√°rio definir uma string de formato que contenha marcadores de posi√ß√£o para os valores que ser√£o substitu√≠dos durante a grava√ß√£o do log. Os marcadores de posi√ß√£o s√£o definidos entre chaves e podem conter um nome opcional para identificar o valor que ser√° substitu√≠do.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;_log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;{Count} eventos para serem emitidos&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;_filaEventos&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Count&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// {&amp;#34;Count&amp;#34;:10, &amp;#34;Message&amp;#34;:&amp;#34;10 eventos para serem emitidos&amp;#34;, &amp;#34;Level&amp;#34;:&amp;#34;Debug&amp;#34;, &amp;#34;Timestamp&amp;#34;:&amp;#34;2023-04-19T15:30:00.0000000Z&amp;#34;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Neste exemplo, a propriedade &amp;ldquo;Count&amp;rdquo; √© adicionada ao log estruturado para representar o n√∫mero de eventos pendentes na fila. O valor dessa propriedade √© 10, que √© o valor de _filaEventos.Count. Al√©m disso, a mensagem de log tamb√©m √© inclu√≠da na propriedade &amp;ldquo;Message&amp;rdquo;, e o n√≠vel de log &amp;ldquo;Debug&amp;rdquo; √© registrado na propriedade &amp;ldquo;Level&amp;rdquo;. A propriedade &amp;ldquo;Timestamp&amp;rdquo; cont√©m a data e hora em que o log foi registrado.&lt;/p&gt;
&lt;p&gt;Com essa sa√≠da, √© poss√≠vel realizar an√°lises mais precisas e filtrar logs de maneira mais eficiente, utilizando as propriedades definidas no log estruturado. O uso de logs estruturados √© uma pr√°tica recomendada para melhorar a qualidade e a efici√™ncia da gest√£o de logs em aplica√ß√µes e sistemas.&lt;/p&gt;
&lt;h2 id=&#34;erro-comum-ao-gerar-log-estruturado&#34;&gt;Erro comum ao gerar log estruturado
&lt;/h2&gt;&lt;p&gt;Um erro comum ao gerar uma mensagem de log √© ignorar o messageTemplate. No exemplo abaixo √© feito a concatena√ß√£o da propriedade Count com a string definida.
Essa pr√°tica n√£o permite que o log seja indexado ou que seja utilizado para gera√ß√£o de m√©tricas quantitativas. Tamb√©m √© observado uma ineficiencia na aloca√ß√£o de mem√≥ria, onde ocorre uma opera√ß√£o de box/unbox do int e a aloca√ß√£o de uma nova string.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-csharp&#34; data-lang=&#34;csharp&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;_log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Debug&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;$&amp;#34;{_filaEventos.Count} eventos para serem emitidos&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// [Debug] 10 eventos para serem emitidos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o
&lt;/h2&gt;&lt;p&gt;Em conclus√£o, o MessageTemplate do Serilog √© uma ferramenta poderosa para personalizar e formatar mensagens de log de maneira estruturada. Ao definir uma string de formato com marcadores de posi√ß√£o, √© poss√≠vel adicionar propriedades significativas aos logs que permitem an√°lises precisas e filtragem eficiente.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ü§Ø &lt;strong&gt;Informa√ß√£o&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Conhe√ßa mais sobre o messagem template em &lt;a class=&#34;link&#34; href=&#34;https://messagetemplates.org&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;https://messagetemplates.org&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        <item>
        <title>Ingress-as-a-Service - Exposi√ß√£o de servi√ßos locais</title>
        <link>https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/</link>
        <pubDate>Sat, 28 Jan 2023 00:00:00 +0000</pubDate>
        
        <guid>https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/</guid>
        <description>&lt;img src="https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/pablo-arroyo-_SEbdtH4ZLM-unsplash.jpg" alt="Featured image of post Ingress-as-a-Service - Exposi√ß√£o de servi√ßos locais" /&gt;&lt;p&gt;A facilidade do uso das clouds permite que em poucos minutos uma aplica√ß√£o esteja dispon√≠vel e publicada, por√©m demanda um esfor√ßo para que isso aconte√ßa. Esse esfor√ßo envolve normalmente o provisionamento de ambientes e a sua publica√ß√£o a cada altera√ß√£o.
Uma alternativa para exposi√ß√£o de servi√ßos √© rotear o acesso diretamente para a aplica√ß√£o local. Essa estrat√©gia elimina a necessidade de publica√ß√µes para testes e /ou valida√ß√µes. Sem o uso de ferramentas esse processo tende a ser demorado, manual e pouco eficiente.&lt;/p&gt;
&lt;h2 id=&#34;ngrok---ingress-as-a-service&#34;&gt;Ngrok - Ingress-as-a-Service
&lt;/h2&gt;&lt;p&gt;O &lt;a class=&#34;link&#34; href=&#34;https://ngrok.com/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;Ngrok&lt;/a&gt; √© uma ferramenta super esperta que, atrav√©s da utiliza√ß√£o de um agente local, permite redirecionar todo o tr√°fego de uma DNS tempor√£rio para uma porta local espec√≠fica.
Isso significa, que toda a requisi√ß√£o feita para esse DNS tempor√°rio √© redirecionada para a porta local do seu dispositivo.&lt;/p&gt;
&lt;h2 id=&#34;webhook&#34;&gt;Webhook
&lt;/h2&gt;&lt;p&gt;Durante a integra√ß√£o como o webhook do Azure DevOps foi necess√°rio expor uma URL v√°lida para receber os eventos do Azure DevOps. Para agilizar o processo do laborat√≥rio inicial, utilizei um DNS tempor√°rio criado pelo ngrok para que a aplica√ß√£o rodando localmente fosse sensibilizada.&lt;/p&gt;
&lt;p&gt;Para ser sensibilizado pelo webhook do Azure DevOps coloquei a aplica√ß√£o para executar localmente na porta 5084.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;info: Microsoft.Hosting.Lifetime[14]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      Now listening on: http://localhost:5084
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Uma vez que o ngrok est√° instalado com sua chave de api configurada, basta executar o agente para criar o DNS tempor√°rio e iniciar o redirecionamento.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ngrok http &lt;span class=&#34;m&#34;&gt;5084&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-07-43.png&#34;
	width=&#34;866&#34;
	height=&#34;291&#34;
	srcset=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-07-43_hu_359f0f9c764c6df.png 480w, https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-07-43_hu_548d6aa663a785ed.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;297&#34;
		data-flex-basis=&#34;714px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;Em alguns segundos o redirecionamento est√° conclu√≠do.&lt;/p&gt;
&lt;p&gt;No teste abaixo, observamos que a requisi√ß√£o de teste feita pelo painel de service hook do Azure DevOps √© recebida diretamente na aplica√ß√£o que est√° rodando localmente em modo debug.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-59.png&#34;
	width=&#34;619&#34;
	height=&#34;424&#34;
	srcset=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-59_hu_475179cb7e2b6644.png 480w, https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-59_hu_57e04f20d41badfe.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;145&#34;
		data-flex-basis=&#34;350px&#34;
	
&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-31.png&#34;
	width=&#34;880&#34;
	height=&#34;195&#34;
	srcset=&#34;https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-31_hu_7233463cc5796a12.png 480w, https://joganacontadainfra.com.br/p/ngrok-dns-publico-temporario/assets/2023-01-29-16-11-31_hu_4d4ec4f289a7be0a.png 1024w&#34;
	loading=&#34;lazy&#34;
	
	
		class=&#34;gallery-image&#34; 
		data-flex-grow=&#34;451&#34;
		data-flex-basis=&#34;1083px&#34;
	
&gt;&lt;/p&gt;
&lt;h2 id=&#34;conclus√£o&#34;&gt;Conclus√£o
&lt;/h2&gt;&lt;p&gt;Em cen√°rios de laborat√≥rios, testes ou integra√ß√µes r√°pidas a estrat√©gia com o ngrok √© uma excelente alternativa para evitar o investimento de tempo e energia em itens de infraestrutura que estejam fora do escopo. O ngrok est√° dispon√≠vel para Windows, Mac e Linux e a sua licen√ßa free permite a cria√ß√£o de um redirecionamento.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;üëâ Dica ‚ò†Ô∏è&lt;/p&gt;
&lt;p&gt;A instala√ß√£o do ngrok est√° dispon√≠vel nos principais gerenciadores de pacotes.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;brew install ngrok/ngrok/ngrok&lt;/li&gt;
&lt;li&gt;choco install ngrok&lt;/li&gt;
&lt;li&gt;snap install ngrok&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
</description>
        </item>
        
    </channel>
</rss>
